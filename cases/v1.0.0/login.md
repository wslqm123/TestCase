# 登录模块 (Login Module)

## 一键登录流程 (Auto Login Flow)

### `[LOGIN-AUTO-001]` 成功登录 (已注册用户，已勾选协议)
- **前置条件**:
  - App能成功获取本机号码。
  - 用户已注册。
- **测试步骤**:
  1. 打开App，自动进入“一键登录”页。
  2. 确认“隐私协议”已勾选。
  3. 点击“手机号一键登录/注册”按钮。
- **预期结果**:
  1. 登录成功。
  2. 如果需要，进入新手引导流程；否则进入App发现页。

### `[LOGIN-AUTO-002]` 登录失败 (未勾选协议)
- **前置条件**:
  - App能成功获取本机号码。
- **测试步骤**:
  1. 打开App，自动进入“一键登录”页。
  2. **取消勾选**“隐私协议”。
  3. 点击“手机号一键登录/注册”按钮。
- **预期结果**:
  1. 登录失败。
  2. Toast提示“请先同意隐私政策和用户协议”。
  3. 页面停留在“一键登录”页。

### `[LOGIN-AUTO-003]` 切换到其他登录方式
- **前置条件**:
  - App能成功获取本机号码。
- **测试步骤**:
  1. 打开App，自动进入“一键登录”页。
  2. 点击“其他登录方式”链接。
- **预期结果**:
  - 成功跳转到“验证码登录”页面。

### `[LOGIN-AUTO-004]` 成功注册并登录 (新用户)
- **前置条件**:
  - App能成功获取本机号码。
  - 该号码未注册。
- **测试步骤**:
  1. 打开App，自动进入“一键登录”页。
  2. 确认“隐私协议”已勾选。
  3. 点击“手机号一键登录/注册”按钮。
- **预期结果**:
  1. 注册并登录成功。
  2. 自动进入新手引导流程。

## 验证码登录流程 (Verification Code Flow)

### `[LOGIN-CODE-001]` 获取验证码 - 手机号合法
- **前置条件**:
  - 进入“验证码登录”页面。
- **测试步骤**:
  1. 输入一个合法的手机号。
  2. 点击“获取验证码”按钮。
- **预期结果**:
  1. “获取验证码”按钮进入倒计时状态 (60s)。
  2. 手机收到验证码短信。

### `[LOGIN-CODE-002]` 获取验证码 - 手机号不合法
- **前置条件**:
  - 进入“验证码登录”页面。
- **测试步骤**:
  1. 输入一个格式不正确的手机号 (如: "123", "abc")。
- **预期结果**:
  - “获取验证码”按钮处于置灰、不可点击状态。

### `[LOGIN-CODE-003]` 获取验证码 - 倒计时与重新发送
- **前置条件**:
  - 已成功获取一次验证码，按钮处于倒计时状态。
- **测试步骤**:
  1. 观察倒计时期间的按钮。
  2. 等待倒计时结束。
- **预期结果**:
  1. 倒计时期间，按钮不可点击并显示秒数。
  2. 倒计时结束后，按钮文本变为“重新发送”并可点击。

### `[LOGIN-CODE-004]` 验证码登录 - 成功 (老用户)
- **前置条件**:
  - 用户已注册，并已收到验证码。
- **测试步骤**:
  1. 输入正确的手机号和验证码。
  2. 确认“隐私协议”已勾选。
  3. 点击“登录”按钮。
- **预期结果**:
  1. 登录成功。
  2. 如果需要，进入新手引导流程；否则进入App发现页。

### `[LOGIN-CODE-005]` 验证码登录 - 成功 (新用户)
- **前置条件**:
  - 用户未注册，并已收到验证码。
- **测试步骤**:
  1. 输入未注册的手机号和正确的验证码。
  2. 确认“隐私协议”已勾选。
  3. 点击“登录”按钮。
- **预期结果**:
  1. 注册并登录成功。
  2. 必须进入新手引导流程。

### `[LOGIN-CODE-006]` 验证码登录 - 失败 (验证码错误)
- **前置条件**:
  - 已收到验证码。
- **测试步骤**:
  1. 输入正确的手机号和错误的验证码。
  2. 点击“登录”按钮。
- **预期结果**:
  1. 登录失败，Toast提示“验证码错误”。
  2. 页面停留，已输入的手机号和验证码内容被保留。

### `[LOGIN-CODE-007]` 验证码登录 - 失败 (未勾选协议)
- **前置条件**:
  - 已收到验证码。
- **测试步骤**:
  1. 输入正确的手机号和验证码。
  2. **取消勾选**“隐私协议”。
  3. 点击“登录”按钮。
- **预期结果**:
  1. 登录失败，Toast提示需要勾选协议。
  2. 页面停留。

### `[LOGIN-CODE-008]` "登录"按钮状态
- **前置条件**:
  - 进入“验证码登录”页面。
- **测试步骤**:
  1. 检查手机号和验证码输入框都为空时的按钮状态。
  2. 只输入手机号，不输入验证码。
  3. 只输入验证码，不输入手机号。
  4. 同时输入格式正确的手机号和有效长度的验证码。
- **预期结果**:
  1. 步骤1-3，登录按钮均为置灰不可点击状态。
  2. 步骤4，登录按钮高亮，变为可点击状态。

### `[LOGIN-UI-001]` 页面元素检查
- **前置条件**: 无。
- **测试步骤**:
  1. 访问“一键登录”页面。
  2. 访问“验证码登录”页面。
- **预期结果**:
  - 页面所有元素（Logo, 按钮, 输入框, 链接等）显示完整，布局与UI设计稿一致。